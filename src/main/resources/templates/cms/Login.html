<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/static/favicon.ico" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/static/css/cms/login.css" />
</head>
<div id="container" class="container">
  <!-- FORM SECTION -->
  <div class="row">
    <!-- SIGN UP -->
    <div class="col align-items-center flex-col sign-up">
      <div class="form-wrapper align-items-center">
        <div class="form sign-up">
          <div class="input-group">
            <i class='bx bxs-user'></i>
            <input type="text" placeholder="Username">
          </div>
          <div class="input-group">
            <i class='bx bx-mail-send'></i>
            <input type="email" placeholder="Email">
          </div>
          <div class="input-group">
            <i class='bx bxs-lock-alt'></i>
            <input type="password" placeholder="Password">
          </div>
          <div class="input-group">
            <i class='bx bxs-lock-alt'></i>
            <input type="password" placeholder="Confirm password">
          </div>
          <button>
            Sign up
          </button>
          <p>
              <span>
                Already have an account?
              </span>
            <b onclick="toggle()" class="pointer">
              Sign in here
            </b>
          </p>
        </div>
      </div>

    </div>
    <!-- END SIGN UP -->
    <!-- SIGN IN -->
    <div class="col align-items-center flex-col sign-in">
      <div class="form-wrapper align-items-center">
        <form class="form sign-in">
          <div class="input-group">
            <i class='bx bxs-user'></i>
            <input type="text" name="username" placeholder="Username">
          </div>
          <div class="input-group">
            <i class='bx bxs-lock-alt'></i>
            <input type="password" name="password" placeholder="Password">
          </div>
          <div class="input-group support">
            <label for="remember-me" class="label" >로그인 유지</label>
            <input type="checkbox" id="remember-me" name="academy-cms-remember-me">
          </div>
          <button type="submit">로그인</button>
        </form>
      </div>
    </div>
    <!-- END SIGN IN -->
  </div>
  <!-- END FORM SECTION -->
  <!-- CONTENT SECTION -->
  <div class="row content-row">
    <!-- SIGN IN CONTENT -->
    <div class="col align-items-center flex-col">
      <div class="text sign-in">
        <h2>
          Academy CMS
        </h2>

      </div>
      <div class="img sign-in">

      </div>
    </div>
    <!-- END SIGN IN CONTENT -->
    <!-- SIGN UP CONTENT -->
    <div class="col align-items-center flex-col">
      <div class="img sign-up">

      </div>
      <div class="text sign-up">
        <h2>
          Join with us
        </h2>

      </div>
    </div>
    <!-- END SIGN UP CONTENT -->
  </div>
  <!-- END CONTENT SECTION -->
</div>
<script>
  let container = document.getElementById('container')

  toggle = () => {
    container.classList.toggle('sign-in')
    container.classList.toggle('sign-up')
  }

  setTimeout(() => {
    container.classList.add('sign-in')
  }, 200)



  $(document).ready(function() {
    $('.form.sign-in').submit(function(event) {
      event.preventDefault(); // 기본 제출 동작 막기

      // 폼 데이터 가져오기
      const username = $('input[name="username"]').val();
      const password = $('input[name="password"]').val();
      const academyCmsRememberMe = $('input[name="academy-cms-remember-me"]').is(":checked");


      // 폼 데이터를 객체로 만들기
      const userInfo = {
        username: username,
        password: password,
        "academy-cms-remember-me": academyCmsRememberMe
      };
        console.log(userInfo)
      // AJAX 요청 보내기
      $.ajax({
        type: "POST",
        url: "/clan/cms/login",
        data: userInfo,
        success: function(response) {
          location.href="/clan/cms"
        },
        error: function(e){
          console.error(e);
          alert('error!!');
        }
      });
    });
  });
</script>